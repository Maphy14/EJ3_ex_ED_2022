---
// Layout Import
import MainLayout from '../../layouts/MainLayout.astro';
// Component Imports
import PostList from '../../components/PostList.astro'
import Paginator from '../../components/Paginator.astro'
import Pagination from '../../components/Pagination.astro'

// Data Fetching: List all Markdown posts in the repo.
// let firstPage = allPosts.slice(0, 2);

export async function getStaticPaths({ paginate}) {
  const pageSize = 3;
  const allPosts = Astro.fetchContent('../../posts/*.md');
  const sortedPosts = allPosts.sort((a, b) => new Date(b.date).valueOf() - new Date(a.date).valueOf());

    return paginate(sortedPosts, {pageSize: pageSize})
}

const { page } = Astro.props
/*
//  <PostList posts={sortedPosts} />
// <Paginator page={page} />
*/
---
<MainLayout title="Posts" description="This a big ol' list of my blog posts- I blog about web dev, dev-ops, my life, and a bunch of other stuff.">

<!-- <PostList posts={page.data} /> -->
<h2 class="title">All Posts</h2>
<small class="count">{page.start + 1}–{page.end + 1} of {page.total}</small>
<PostList posts={page.data} />
<!-- {page.data.map((post) => <PostList post={post} />)} -->
<!-- {page.data.map(post => (<PostList post={post} />))} -->
<Paginator page={page} />
<!-- <Pagination prevUrl={page.url.prev} nextUrl={page.url.next} /> -->
<!-- <Pagination prevUrl="/posts" nextUrl="/posts/2" /> -->
  <!-- <p><i>page 1 of 1 (I don't have pagination yet 🤷🏻‍♂️)</i></p> -->

</MainLayout>


